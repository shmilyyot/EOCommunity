<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="../../js/jquery-3.5.1.min.js"></script>
    <!--    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>-->
    <!-- Bootstrap -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="../../js/bootstrap.min.js"></script>
    <!-- 引入Bootstrap -->
    <link href="../../css/login.css" rel="stylesheet">
    <title>EO社区注册</title>
    <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon" />
    <!--    判断用户是否登录-->
    <script src="../../js/is_login.js"></script>

</head>
<body onload="registerCheckSuccess()">
<div>
    <nav class="navbar navbar-default">
        <!--            <div class="container-fluid">-->
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a class="navbar-brand" href="/index.html">首页</a>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="#">留言</a></li>
                </ul>
                <form class="navbar-form navbar-left">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search">
                    </div>
                    <button type="submit" class="btn btn-default">搜索</button>
                </form>
                <div sec:authorize="isAnonymous()">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a id="show_btn_login" href="/pages/login">请登录</a></li>
                        <li><a id="show_btn_register" href="/pages/register">注册</a></li>
                    </ul>
                </div>
                <div sec:authorize="isAuthenticated()">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a><div sec:authentication="name"></div></a></li>
                        <li><a id="show_btn_logout" href="/logout.do">注销</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
</div>
<!--<div id="header"></div>-->
<!--<script>-->
<!--    $("#header").load("pages/header");-->
<!--</script>-->
<div id="showLogin">
    <div id="hide_login_btn">
        <input type="button" value="X">
    </div>
    <H1> 注册</H1>
    <span id="errinfo1"></span>
    <span id="errinfo2"></span>
    <span id="errinfo3"></span>
    <span id="errinfo4"></span>
    <div class="inputBox">
        <form action="/pages/CreateAccount" method="post" onsubmit="return registerCheckNull(this)">
            <div class="input_text">
                <label>
                    <span>*</span>用户账号
                </label>
                <label>
                    <input type="text" name="accountName" placeholder="请输入用户名" autocomplete="off">
                </label>
            </div>
            <div class="input_text">
                <label>
                    <span>*</span>密&#12288&#12288码
                </label>
                <label>
                    <input type="password" name="accountPassword" placeholder="请输入密码"
                           autocomplete="off">
                </label>
            </div>
            <div class="input_text">
                <label>
                    <span>*</span>密码确认
                </label>
                <label>
                    <input type="password" name="accountPassword2" placeholder="请再次输入密码"
                           autocomplete="off">
                </label>
            </div>
            <div class="input_text">
                <label>
                    生&#12288&#12288日
                </label>
                <label>
                    <input type="date" name="accountBirthday">
                </label>
            </div>
            <div class="input_text">
                <label>
                    邮&#12288&#12288箱
                </label>
                <label>
                    <input type="email" name="accountEmail" placeholder="请输入邮箱" autocomplete="off">
                </label>
            </div>
            <div class="input_text">
                <label>
                    家庭住址
                </label>
                <label>
                    <input type="text" name="accountAddress" placeholder="请输入地址" autocomplete="off">
                </label>
            </div>
            <input class="input_btn" type="submit" value="注册"><br>
        </form>
        <div id="register_btn">已经有账户？点击<a href="/pages/login">登录</a></div>
    </div>
</div>
</body>
<script type="text/javascript">
    $("#show_btn_login").click(function () {
        $("#showLogin").css("visibility", "inherit")
        $(".show_btn_register").css("visibility", "hidden")
    })
    $("#hide_login_btn").click(function () {
        $("#showLogin").css("visibility", "hidden")
    })
</script>
<script th:inline="javascript">
    function registerCheckSuccess(){
        var Status=[[${status}]];
        if(Status == null) return;
        if(Status == true) {
            alert("注册成功,点击确认即跳转登陆界面");
            window.location.replace("login")
            // location.assign("pages/login");
        }
        if(Status == false){
            window.location.replace("pages/register")
            document.getElementById("errinfo1").innerText = "此用户名已被占用";
            document.getElementById("errinfo1").style.display = "";
        }
    }
</script>
</html>